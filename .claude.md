# LeagueFindr - Code Rules

## Current Status
- **Branch**: `feature/admin-dashboard-and-form-refactoring`
- **Last session focus**: Completed draft update functionality (allow users to save changes when editing existing drafts, not just submit)
- **Key implementations**:
  - Added `GetDraftByID` repository method to fetch drafts by ID
  - Modified `SaveDraft` to handle both INSERT (create) and UPDATE (edit) based on draft.ID
  - Added `UpdateDraft` service method that validates org ownership before updating
  - Fixed handler duplicate variable declaration
  - Backend builds successfully

## Branches
- `main` - production | `dev` - features | `feature/*`, `fix/*`, `refactor/*`, `test/*`

## Commits
- Format: `type: description` (feat, fix, refactor, docs, test, chore, perf)
- Body: detailed explanation if non-trivial
- Sign-off: ðŸ¤– Generated with Claude Code + Co-Authored-By footer

## Code Standards
- **Error handling**: Wrap with context `fmt.Errorf("op: %w", err)`, never ignore silently
- **Logging**: Use `slog` with structured context (IDs, operation, errors)
- **Style**: Clarity over brevity, "why" comments, single responsibility, meaningful names
- **Performance**: Avoid unnecessary calls, cache, use timeouts, profile first

## Project Layout
```
/backend - Go API (Chi router, PostgreSQL, Clerk auth)
/frontend - Next.js dashboard (shadcn/ui, Tailwind, SWR)
```

## Build & Package Management
- **Always use `pnpm`** for frontend builds, NOT `npm`
- Dashboard build command: `pnpm build`
- Running from dashboard directory: `pnpm build`
